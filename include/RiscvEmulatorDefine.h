/*

Copyright 2023 Marc Ketel
SPDX-License-Identifier: Apache-2.0

*/

#ifndef RiscvEmulatorDefine_H_
#define RiscvEmulatorDefine_H_

#define IO_ORIGIN  0x02000000
#define ROM_ORIGIN 0x20000000
#define RAM_ORIGIN 0x40000000

// R-type, register register.
#define OPCODE_OPERATION 0b0110011
#define FUNCT7_3_OPERATION_ADD 0b0000000000
#define FUNCT7_3_OPERATION_SUB 0b0100000000
#define FUNCT7_3_OPERATION_SLL 0b0000000001
#define FUNCT7_3_OPERATION_SLT 0b0000000010
#define FUNCT7_3_OPERATION_SLTU 0b0000000011
#define FUNCT7_3_OPERATION_XOR 0b0000000100
#define FUNCT7_3_OPERATION_SRL 0b0000000101
#define FUNCT7_3_OPERATION_SRA 0b0100000101
#define FUNCT7_3_OPERATION_OR 0b0000000110
#define FUNCT7_3_OPERATION_AND 0b0000000111

#define OPCODE_ILLEGAL 0b1111111

// I-type, register immediate.
#define OPCODE_FENCE 0b0001111

#define OPCODE_IMMEDIATE 0b0010011
#define FUNCT3_IMMEDIATE_ADDI 0b000
#define FUNCT3_IMMEDIATE_SLLI 0b001
#define IMM11_7_IMMEDIATE_SLLI 0b0000000
#define FUNCT3_IMMEDIATE_SLTI 0b010
#define FUNCT3_IMMEDIATE_SLTIU 0b011
#define FUNCT3_IMMEDIATE_XORI 0b100
#define FUNCT3_IMMEDIATE_SR_I 0b101
#define IMM11_7_IMMEDIATE_SRLI 0b0000000
#define IMM11_7_IMMEDIATE_SRAI 0b0100000
#define FUNCT3_IMMEDIATE_ORI 0b110
#define FUNCT3_IMMEDIATE_ANDI 0b111

#define OPCODE_JUMPANDLINKREGISTER 0b1100111
#define FUNCT3_JUMPANDLINKREGISTER_JALR 0b000

#define OPCODE_LOAD 0b000011
#define FUNCT3_LOAD_LB 0b000
#define FUNCT3_LOAD_LH 0b001
#define FUNCT3_LOAD_LW 0b010
#define FUNCT3_LOAD_LBU 0b100
#define FUNCT3_LOAD_LHU 0b101

#define OPCODE_SYSTEM 0b1110011
#define FUNCT12_ECALL 0b000000000000
#define FUNCT12_EBREAK 0b000000000001

// S-type, store.
#define OPCODE_STORE 0b0100011
#define FUNCT3_STORE_SB 0b000
#define FUNCT3_STORE_SH 0b001
#define FUNCT3_STORE_SW 0b010

// B-type, branch.
#define OPCODE_BRANCH 0b1100011
#define FUNCT3_BRANCH_BEQ 0b000
#define FUNCT3_BRANCH_BNE 0b001
#define FUNCT3_BRANCH_BLT 0b100
#define FUNCT3_BRANCH_BGE 0b101
#define FUNCT3_BRANCH_BLTU 0b110
#define FUNCT3_BRANCH_BGEU 0b111

#define BRANCH_YES 0
#define BRANCH_NO 1

// U-type, upper immediate.
#define OPCODE_ADDUPPERIMMEDIATE2PC 0b0010111
#define OPCODE_LOADUPPERIMMEDIATE 0b0110111

// J-type, jump.
#define OPCODE_JUMPANDLINK 0b1101111

#endif